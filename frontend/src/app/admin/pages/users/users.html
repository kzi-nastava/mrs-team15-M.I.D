  <div class="toast align-items-center text-white bg-black border-0"
       [class.show]="showMessage"
       role="alert"
       aria-live="assertive"
       aria-atomic="true">
    <div class="d-flex">
      <div class="toast-body">
        {{ message }}
      </div>
      <button type="button"
              class="btn-close btn-close-white me-2 m-auto"
              (click)="showMessage = false">
      </button>
    </div>
  </div>
<app-page-header
  title="Users"
  description="Admin view of all users"
  [showDateFilter]="true"
  [searchMode]="true"
  [searchPlaceholder]="'Search people'"
  (filter)="onSearch($event)"
  (clearFilter)="onClearFilter()"
></app-page-header>

<section class="users-table mt-3">
  <div class="d-flex justify-content-between align-items-center mb-2">
    <div class="d-flex align-items-center">
      <label class="me-2">Per page:</label>
      <select class="form-select" style="width:100px" [ngModel]="pageSize" (ngModelChange)="onPageSizeChange($event)">
        <option [ngValue]="5">5</option>
        <option [ngValue]="10">10</option>
        <option [ngValue]="25">25</option>
        <option [ngValue]="50">50</option>
      </select>
    </div>
  </div>
  <div class="table-responsive">
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th scope="col">Role</th>
          <th scope="col">Email</th>
          <th scope="col">Name</th>
          <th scope="col">Surname</th>
          <th scope="col">Phone Number</th>
          <th scope="col">Blocked</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let u of pagedUsers">
          <td>{{ u.role }}</td>
          <td>{{ u.email }}</td>
          <td>{{ u.firstName }}</td>
          <td>{{ u.lastName }}</td>
          <td>{{ u.phoneNumber || '-' }}</td>
          <td>{{ u.blocked ? 'Yes' : 'No' }}</td>
        </tr>
        <tr *ngIf="filteredUsers.length === 0">
          <td colspan="6" class="text-center">No users found.</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div *ngIf="totalPages > 1" class="d-flex justify-content-center align-items-center gap-3 mb-3">
    <app-button text="←" variant="primary" height="30px" width="40px" [disabled]="currentPage === 1" (clicked)="changePage(currentPage - 1)"></app-button>
    <span class="text-muted"> page {{ currentPage }} of {{ totalPages }} ({{ filteredUsers.length }} total users)</span>
    <app-button text="→" variant="primary" height="30px" width="40px" [disabled]="currentPage === totalPages" (clicked)="changePage(currentPage + 1)"></app-button>
  </div>
</section>
