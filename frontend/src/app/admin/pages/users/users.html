  <div class="toast align-items-center text-white bg-black border-0"
       [class.show]="showMessage"
       role="alert"
       aria-live="assertive"
       aria-atomic="true">
    <div class="d-flex">
      <div class="toast-body">
        {{ message }}
      </div>
      <button type="button"
              class="btn-close btn-close-white me-2 m-auto"
              (click)="showMessage = false">
      </button>
    </div>
  </div>
<app-page-header
  title="Users"
  description="Admin view of all users"
  [showDateFilter]="true"
  [searchMode]="true"
  [searchPlaceholder]="'Search people'"
  (filter)="onSearch($event)"
  (clearFilter)="onClearFilter()"
></app-page-header>

<section class="users-table mt-3">
  <div class="d-flex justify-content-between align-items-center mb-2">
    <div class="d-flex align-items-center">
      <label class="me-2">Per page:</label>
      <select class="form-select" style="width:100px" [ngModel]="pageSize" (ngModelChange)="onPageSizeChange($event)">
        <option [ngValue]="5">5</option>
        <option [ngValue]="10">10</option>
        <option [ngValue]="25">25</option>
        <option [ngValue]="50">50</option>
      </select>
    </div>
  </div>
  <div class="table-responsive">
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th scope="col">Role</th>
          <th scope="col">Email</th>
          <th scope="col">Name</th>
          <th scope="col">Surname</th>
          <th scope="col">Phone Number</th>
          <th scope="col">Blocked</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let u of pagedUsers">
          <td>{{ u.role }}</td>
          <td>{{ u.email }}</td>
          <td>{{ u.firstName }}</td>
          <td>{{ u.lastName }}</td>
          <td>{{ u.phoneNumber || '-' }}</td>
          <td>{{ u.blocked ? 'Yes' : 'No' }}</td>
        </tr>
        <tr *ngIf="filteredUsers.length === 0">
          <td colspan="6" class="text-center">No users found.</td>
        </tr>
      </tbody>
    </table>
  </div>

  <nav aria-label="Page navigation" *ngIf="totalPages > 1">
    <ul class="pagination justify-content-center">
      <li class="page-item" [class.disabled]="currentPage === 1">
        <a class="page-link" (click)="changePage(currentPage - 1)">Previous</a>
      </li>
      <li class="page-item" *ngFor="let p of pages" [class.active]="currentPage === p">
        <a class="page-link" (click)="changePage(p)">{{ p }}</a>
      </li>
      <li class="page-item" [class.disabled]="currentPage === totalPages">
        <a class="page-link" (click)="changePage(currentPage + 1)">Next</a>
      </li>
    </ul>
  </nav>
</section>
